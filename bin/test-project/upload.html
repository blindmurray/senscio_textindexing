<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>mytest</title>
      <link rel="stylesheet" type="text/css" href="css/style.css">
      <script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>
      <script type="text/javascript" src="jquery-3.2.1.min.js"></script>
      <script type="text/javascript" src="modal.js"></script>
      <script type="text/javascript" src = "index.js"></script>
      <link rel="shortcut icon" href="">
   </head>
   <body>
      <div class="news">
         <div class="nav">
            <ul>
               <li><a href="index.html">Home</a></li>
               <li><a class="active" href="upload.html">Upload</a></li>
               <li><a href="search.html">Search</a></li>
               <li><a href="http://www.sensciosystems.com">Senscio</a></li>
            </ul>
         </div>
         <br>       
         <div>
            <span class="title">Upload a Document</span>
            <br>
               <form action='fileupload' method='post' enctype='multipart/form-data'>
               <br>
               <div><input type="file" name='filetoupload' id="t6" class="v5" multiple></div>
               <br>
               <input type="button" id="myBtn" value="Choose Location">
               <br><br>
               <input type="hidden" id="chosenFolder" name="chosenFolder" value="">
               <div>Key Terms: <input type="text" name='keyterms' id='keyterms'></div>
               <span id="location"></span>
               <div id="myModal" class="modal">
                  <div class="modal-content">
                     <span id = tree> </span>
                     <input type="button" value="Choose Location" onclick="onChooseLocation()">
                  <span class="close">&times;</span>
                     </div>
                     
                  <br>
                  </div>
               </div>
               <br>
               <input type='submit' value='Submit'>
               Please make sure your file name is readable. Put spaces between words and dashes between dates. 
            </form>
            <br>
         </div>
      </div>
      <div class="foot">
         <p id="text">Senscio Systems, Inc.<br>
            1740 Massachusetts Ave<br>
            Boxborough, MA 01719<br>
            (978) 635-9090
         </p>
      </div>
      <script>
         var modal = document.getElementById('myModal');
         var btn = document.getElementById("myBtn");
         var span = document.getElementsByClassName("close")[0];
         btn.onclick = function() {
            modal.style.display = "block";
              var tree = {"id":"tree"};
               tree = JSON.stringify(tree);
               var xhr = ajax();
               xhr.onload = function () {
                  if (xhr.readyState === 4) {
                     if (xhr.status === 200) {    
                        document.getElementById("tree").innerHTML = xhr.responseText;
                        prepareList()
                     } else {
                        alert("Error: " + xhr.responseText);
                     }
                  }
               };
                xhr.open("POST", "/", true);
                xhr.setRequestHeader("Content-Type", "text/plain");
                xhr.send(tree);
                console.dir(tree);
         };
         span.onclick = function() {
            modal.style.display = "none";
         }
         window.onclick = function(event) {
             if (event.target == modal) {
                 modal.style.display = "none";
             }
         }

      </script>
   </body>
</html>